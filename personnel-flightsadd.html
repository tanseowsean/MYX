<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="images/favicon.png" type="image/png" sizes="16x16">
    <title>MYX Baggage Tracking System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap" rel="stylesheet">
</head>

<body>

    <div class="container">

        <!-- Header -->
        <header>
            <div class="logo"><img src="images/logoXS.png" alt=""></div>
            <div class="search">
                <input type="text">
                <button><img src="images/icon-search.png" alt=""></button>
            </div>
            <div class="account">
                <div class="text">Hello, Xuan</div>
                <img src="images/user.png" alt="">
            </div>
        </header>
        <!-- /Header -->

        <!-- Menu -->
        <div class="menu">
            <a href="personnel-mainmenu.html" class="item">
                <div class="icon"><img src="images/icon-menu.png" alt=""></div>
                <div class="text">Main Menu</div>
            </a>
            <a href="personnel-checkin.html" class="item">
                <div class="icon"><img src="images/icon-checkin.png" alt=""></div>
                <div class="text">Check In</div>
            </a>
            <a href="personnel-flightsmain.html" class="item">
                <div class="icon"><img src="images/icon-plane.png" alt=""></div>
                <div class="text">Flights</div>
            </a>
            <a href="personnel-configure.html" class="item">
                <div class="icon"><img src="images/icon-gear.png" alt=""></div>
                <div class="text">Configure</div>
            </a>
            <a href="personnel-baggage.html" class="item">
                <div class="icon"><img src="images/icon-luggage.png" alt=""></div>
                <div class="text">Baggage</div>
            </a>
            <a href="personnel-analytics.html" class="item">
                <div class="icon"><img src="images/icon-data-analytics.png" alt=""></div>
                <div class="text">Analytics</div>
            </a>
        </div>
        <!-- /Menu -->

        <!-- Hamburger -->
        <div class="hamburger">
            <img src="images/hamburger.png" alt=""> MENU
        </div>
        <!--/Hamburger -->

        <!-- Mobile Menu -->
        <div class="mobile-menu">
            <a href="personnel-mainmenu.html" class="item">
                <div class="icon"><img src="images/icon-menu.png" alt=""></div>
                <div class="text">Main Menu</div>
            </a>
            <a href="personnel-checkin.html" class="item">
                <div class="icon"><img src="images/icon-checkin.png" alt=""></div>
                <div class="text">Check In</div>
            </a>
            <a href="personnel-flightsmain.html" class="item">
                <div class="icon"><img src="images/icon-plane.png" alt=""></div>
                <div class="text">Flights</div>
            </a>
            <a href="personnel-configure.html" class="item">
                <div class="icon"><img src="images/icon-gear.png" alt=""></div>
                <div class="text">Configure</div>
            </a>
            <a href="personnel-baggage.html" class="item">
                <div class="icon"><img src="images/icon-luggage.png" alt=""></div>
                <div class="text">Baggage</div>
            </a>
            <a href="personnel-analytics.html" class="item">
                <div class="icon"><img src="images/icon-data-analytics.png" alt=""></div>
                <div class="text">Analytics</div>
            </a>
            <div class="close"><img src="images/close.png" alt=""></div>
        </div>
        <!-- /Mobile Menu -->

        <!-- Content-Area -->
        <div class="content">

            <div class="main-title">
                Add New Flight
            </div>

            <!-- display form to add new flight -->
            <form class="add-flight">

                <div class="item">
                    <label for="fDate">Flight Date: </label>
                    <div class="input">
                        <input type="date" id="fDate" name="fDate">
                    </div>
                </div>

                <div class="item">
                    <label for="fAircraft">Aircraft: </label>
                    <div class="input">
                        <input type="text" id="fAircraft" name="fAircraft">
                    </div>
                </div>

                <div class="item">
                    <label for="fDepartLoc">Depart Location: </label>
                    <div class="input">
                        <select id="fDepartLoc"></select>
                    </div>
                </div>

                <div class="item">
                    <label for="fArriveLoc">Arrive Location: </label>
                    <div class="input">
                        <select id="fArriveLoc"></select>
                    </div>
                </div>

                <div class="item">
                    <label for="fDepartTime">Depart Time: </label>
                    <div class="input">
                        <input type="text" id="fDepartTime" value="HH:MM" maxlength="5">
                    </div>
                </div>

                <div class="item">
                    <label for="fArriveTime">Arrive Time: </label>
                    <div class="input">
                        <input type="text" id="fArriveTime" value="HH:MM" maxlength="5">
                    </div>
                </div>

                <div class="item">
                    <label for="fStatus">Flight Status: </label>
                    <div class="input">
                        <select id="fStatus">
                            <option value=""></option>
                            <option value="Gate Open">Gate Open</option>
                            <option value="Boarding">Boarding</option>
                            <option value="Gate Closing">Gate Closing</option>
                            <option value="Departed">Departed</option>
                            <option value="Landed">Landed</option>
                        </select>
                    </div>
                </div>

                <div class="item">
                    <label for="" class="desktop-only">&nbsp;</label>
                    <div class="input">
                        <input type="submit" class="submit-btn">
                    </div>
                </div>

            </form>
        </div>
        <!-- /Content-Area -->

        <!-- Footer -->
        <footer>
            <div class="logo">
                <img src="images/logo-wt.png" alt="">
            </div>
            <div class="copyright">
                Copyright Â© MYX Baggage Tracking System 2023 All Rights Reserved.
            </div>
        </footer>
        <!-- /Footer -->

    </div>

    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>

    <script id="firebaseScript">
        const firebaseConfig = {
            apiKey: "AIzaSyAsIlkYQFu9rExzhdpG5HHfnhEI66Unj-4",
            authDomain: "myx-baggage.firebaseapp.com",
            projectId: "myx-baggage",
            storageBucket: "myx-baggage.appspot.com",
            messagingSenderId: "342593572959",
            appId: "1:342593572959:web:4eac93d796cfa787000bea",
            measurementId: "G-5SKV7NKZY1"
        };

        firebase.initializeApp(firebaseConfig);
        let db = firebase.firestore();

        //function to update data in real time whenever there are changes in database record
        function getAllDataRealtime() {
            db.collection("airports").onSnapshot((querySnapshot) => {
                var airports = [];
                var allID = [];
                querySnapshot.forEach(doc => {
                    airports.push(doc.data());
                    allID.push(doc.id);
                });
                addAllOption(allID, airports);
            });
        }

        var departNum = 0;
        var arriveNum = 0;
        var departSelect = document.getElementById('fDepartLoc');
        var arriveSelect = document.getElementById('fArriveLoc');

        function addDepartOption(airportID, airportName, airportState) {
            var option = document.createElement('option');
            option.value = "dep".concat(airportID);
            option.text = airportID + " - " + airportName + " - " + airportState;
            departSelect.appendChild(option);
            departNum++;
        }

        function addArriveOption(airportID, airportName, airportState) {
            var option = document.createElement('option');
            option.value = "arr".concat(airportID);
            option.text = airportID + " - " + airportName + " - " + airportState;
            arriveSelect.appendChild(option);
            arriveNum++;
        }

        function addAllOption(AirportIDList, AirportList) {
            departNum = 0;
            arriveNum = 0;
            AirportList.forEach(element => {
                addDepartOption(AirportIDList[departNum], element.airportName, element.airportState);
                addArriveOption(AirportIDList[arriveNum], element.airportName, element.airportState);
            });
        }

        window.onload = getAllDataRealtime;
    </script>

    <script src="https://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.js"></script>
    <link href="https://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.css" rel="stylesheet" />

    <script id="timepicker">
        var timepicker = new TimePicker(['fDepartTime', 'fArriveTime'], {
            lang: 'en'
        });

        timepicker.on('change', function (evt) {
            var value = (evt.hour || '00') + ':' + (evt.minute || '00');
            evt.element.value = value;
        });
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>